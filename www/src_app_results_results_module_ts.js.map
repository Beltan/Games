{"version":3,"file":"src_app_results_results_module_ts.js","mappings":"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","sources":["./src/app/results/results-routing.module.ts","./src/app/results/results.module.ts","./src/app/results/results.page.ts","./src/app/results/results.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ResultsPage } from './results.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ResultsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ResultsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { ResultsPageRoutingModule } from './results-routing.module';\nimport { ResultsPage } from './results.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ResultsPageRoutingModule\n  ],\n  declarations: [ResultsPage]\n})\nexport class ResultsPageModule {}\n","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Globals } from '../globals';\n\n@Component({\n  selector: 'app-results',\n  templateUrl: './results.page.html',\n  styleUrls: ['./results.page.scss'],\n})\nexport class ResultsPage {\n  globals: Globals;\n\n  allowedGames = [];\n  filteredGames = [];\n  currentFilter = '';\n  sortDirection = 0;\n  sortKey = null;\n  filteringByOwned = false;\n  filteringByIgnored = false;\n\n  constructor(private router: Router, globals: Globals) {\n    this.globals = globals;\n  }\n\n  ionViewWillEnter() {\n    if (this.globals.games.length === 0) {\n      this.router.navigateByUrl('/home');\n    }\n\n    this.allowedGames = [];\n\n    for (let i = 0; i < this.globals.games.length; i++) {\n      if (!this.globals.maxPlayers[i] || !this.globals.minPlayers[i]) {\n        continue;\n      }\n      if (\n        this.globals.maxPlayers[i] < this.globals.players.length ||\n        this.globals.minPlayers[i] > this.globals.players.length\n      ) {\n        continue;\n      }\n\n      let maximum = -1;\n      let minimum = 11;\n      let avg = 0;\n      let ignore = 0;\n\n      for (const player of this.globals.players) {\n        const playerIndex = this.globals.allPlayers.indexOf(player);\n\n        const currentScore = this.globals.scores[i][playerIndex];\n\n        if (currentScore === -1) {\n          ignore++;\n          continue;\n        }\n\n        avg += currentScore;\n\n        if (currentScore < minimum) {\n          minimum = currentScore;\n        }\n        if (currentScore > maximum) {\n          maximum = currentScore;\n        }\n      }\n\n      if (this.globals.players.length - ignore > 0) {\n        avg = avg / (this.globals.players.length - ignore);\n      } else {\n        avg = -1;\n      }\n\n      let sumSquares = 0;\n      for (const player of this.globals.players) {\n        const playerIndex = this.globals.allPlayers.indexOf(player);\n\n        const currentScore = this.globals.scores[i][playerIndex];\n\n        if (currentScore === -1) {\n          continue;\n        }\n\n        const diff = avg - currentScore;\n        sumSquares += diff * diff;\n      }\n\n      let variance = -1;\n      if (this.globals.players.length - ignore > 0) {\n        variance = sumSquares / (this.globals.players.length - ignore);\n      }\n\n      const game = {\n        name: this.globals.games[i],\n        average: avg !== -1 ? avg.toFixed(2) : '-',\n        max: maximum,\n        min: minimum,\n        variance: variance !== -1 ? variance.toFixed(2) : '-',\n        ignored: ignore.toFixed(0),\n        owners: this.globals.owners[i],\n      };\n      this.allowedGames.push(game);\n    }\n\n    this.filteredGames = this.allowedGames;\n    this.sortBy('average');\n  }\n\n  filterDatatable(event) {\n    const filter = event.target.value.toLowerCase();\n    this.searchFilter(filter);\n    this.currentFilter = filter;\n  }\n\n  searchFilter(filter) {\n    if (filter === '') {\n      this.filteredGames = this.allowedGames;\n    } else {\n      this.filteredGames = [];\n\n      for (const game of this.allowedGames) {\n        if (game.name.toLowerCase().indexOf(filter) !== -1) {\n          this.filteredGames.push(game);\n        }\n      }\n    }\n\n    if (this.filteringByOwned) {\n      this.filterByOwned();\n    }\n  }\n\n  toggleOwned() {\n    this.filteringByOwned = !this.filteringByOwned;\n    this.filterByOwned();\n  }\n\n  sortBy(key) {\n    this.sortKey = key;\n    this.sort();\n  }\n\n  sort() {\n    if (this.sortDirection === 0) {\n      this.filteredGames = this.filteredGames.sort((a, b) => {\n        const valA = a[this.sortKey];\n        const valB = b[this.sortKey];\n        return valA.localeCompare(valB, 'en', { numeric: true });\n      });\n      this.sortDirection++;\n    } else if (this.sortDirection === 1) {\n      this.filteredGames = this.filteredGames.sort((a, b) => {\n        const valA = a[this.sortKey];\n        const valB = b[this.sortKey];\n        return valB.localeCompare(valA, 'en', { numeric: true });\n      });\n      this.sortDirection--;\n    }\n  }\n\n  filterByOwned() {\n    if (this.filteringByOwned) {\n      this.filteredGames = this.filteredGames.filter((game) => {\n        if (\n          game.owners[0] === 'All' ||\n          this.globals.players.filter((value) => game.owners.includes(value))\n            .length !== 0\n        ) {\n          return game;\n        }\n      });\n    } else {\n      this.searchFilter(this.currentFilter);\n    }\n  }\n}\n","export default \"<ion-content>\\n  <div class=\\\"container\\\">\\n    <div id=\\\"inputs\\\">\\n      <input\\n        type=\\\"text\\\"\\n        placeholder=\\\"Search...\\\"\\n        (keyup)=\\\"filterDatatable($event)\\\"\\n      />\\n      <ion-item lines=\\\"none\\\">\\n        <ion-label>Owned</ion-label>\\n        <ion-checkbox (ionChange)=\\\"toggleOwned()\\\" slot=\\\"start\\\"></ion-checkbox>\\n      </ion-item>\\n    </div>\\n  </div>\\n\\n  <ion-row class=\\\"header-row\\\">\\n    <ion-col size=\\\"4\\\" class=\\\"center-text\\\" (click)=\\\"sortBy('name')\\\">\\n      <ion-item lines=\\\"none\\\" class=\\\"ion-text-center\\\">\\n        <ion-label>Name</ion-label>\\n        <ion-icon\\n          name=\\\"arrow-down\\\"\\n          *ngIf=\\\"sortDirection === 0 && sortKey === 'name'\\\"\\n        ></ion-icon>\\n        <ion-icon\\n          name=\\\"arrow-up\\\"\\n          *ngIf=\\\"sortDirection === 1 && sortKey === 'name'\\\"\\n        ></ion-icon>\\n      </ion-item>\\n    </ion-col>\\n    <ion-col size=\\\"2\\\" class=\\\"center-text\\\" (click)=\\\"sortBy('ignored')\\\">\\n      <ion-item lines=\\\"none\\\" class=\\\"ion-text-center\\\">\\n        <ion-label>Ign</ion-label>\\n        <ion-icon\\n          name=\\\"arrow-down\\\"\\n          *ngIf=\\\"sortDirection === 0 && sortKey === 'ignored'\\\"\\n        ></ion-icon>\\n        <ion-icon\\n          name=\\\"arrow-up\\\"\\n          *ngIf=\\\"sortDirection === 1 && sortKey === 'ignored'\\\"\\n        ></ion-icon>\\n      </ion-item>\\n    </ion-col>\\n    <ion-col size=\\\"3\\\" class=\\\"center-text\\\" (click)=\\\"sortBy('average')\\\">\\n      <ion-item lines=\\\"none\\\" class=\\\"ion-text-center\\\">\\n        <ion-label>Avg</ion-label>\\n        <ion-icon\\n          name=\\\"arrow-down\\\"\\n          *ngIf=\\\"sortDirection === 0 && sortKey === 'average'\\\"\\n        ></ion-icon>\\n        <ion-icon\\n          name=\\\"arrow-up\\\"\\n          *ngIf=\\\"sortDirection === 1 && sortKey === 'average'\\\"\\n        ></ion-icon>\\n      </ion-item>\\n    </ion-col>\\n    <ion-col size=\\\"3\\\" class=\\\"center-text\\\" (click)=\\\"sortBy('variance')\\\">\\n      <ion-item lines=\\\"none\\\" class=\\\"ion-text-center\\\">\\n        <ion-label>Var</ion-label>\\n        <ion-icon\\n          name=\\\"arrow-down\\\"\\n          *ngIf=\\\"sortDirection === 0 && sortKey === 'variance'\\\"\\n        ></ion-icon>\\n        <ion-icon\\n          name=\\\"arrow-up\\\"\\n          *ngIf=\\\"sortDirection === 1 && sortKey === 'variance'\\\"\\n        ></ion-icon>\\n      </ion-item>\\n    </ion-col>\\n  </ion-row>\\n  <ion-row *ngFor=\\\"let row of filteredGames; let i = index;\\\" class=\\\"data-row\\\">\\n    <ion-col size=\\\"4\\\"> {{ row.name }} </ion-col>\\n    <ion-col size=\\\"2\\\" class=\\\"center-text\\\"> {{ row.ignored }} </ion-col>\\n    <ion-col size=\\\"3\\\" class=\\\"center-text\\\"> {{ row.average }} </ion-col>\\n    <ion-col size=\\\"3\\\" class=\\\"center-text\\\"> {{ row.variance }} </ion-col>\\n  </ion-row>\\n</ion-content>\\n\";"],"names":[],"sourceRoot":"webpack:///"}